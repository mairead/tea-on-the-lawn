$(document).ready(function(){function e(e){var o=$("a[name='"+e+"']");$("html,body").animate({scrollTop:o.offset().top},"slow")}function o(e){new google.maps.Marker({position:e,map:u,icon:h,shadow:f})}function n(){var e=new google.maps.LatLng(51.31811432866838,-2.273397445678711),n=new google.maps.LatLng(50.08694148515897,-5.315580368041992),a=[{location:new google.maps.LatLng(50.517956408330775,-2.4546074867248535)},{location:new google.maps.LatLng(50.725154955049604,-2.936643362045288)},{location:new google.maps.LatLng(50.63253216660307,-3.320016860961914)},{location:new google.maps.LatLng(50.46471649673749,-3.525238037109375)},{location:new google.maps.LatLng(50.43374151538998,-3.6857950687408447)},{location:new google.maps.LatLng(50.23987696243864,-3.767763376235962)},{location:new google.maps.LatLng(50.34357068638224,-4.7946953773498535)},{location:new google.maps.LatLng(50.17046647526639,-5.107183456420898)}],t=new google.maps.DirectionsRenderer({suppressMarkers:!0});t.setMap(u);var g={origin:e,destination:n,travelMode:google.maps.TravelMode.DRIVING,waypoints:a};P.route(g,function(e,n){if(n==google.maps.DirectionsStatus.OK){t.setDirections(e),e.routes[0].legs[0];for(var a=e.routes[0].legs,g=a.length-1;g>=0;g--)o(a[g].start_location);o(a[a.length-1].end_location)}})}var a=$("#names"),t=$("#validation-msg"),g=$("#attending"),s=$("#notAttending"),m=$("#attending-msg");$("#notAttending").bind("change",function(e){var o=$(e.target);o.is(":checked")&&$("#form-action").submit()}),a.bind("blur",function(){a.val()?t.hide():t.show()}),$(g,s).bind("blur",function(){g.is(":checked")||g.is(":checked")?m.hide():m.show()}),$(g,s).bind("click",function(){g.is(":checked")||s.is(":checked")?m.hide():m.show()}),$form=$("#form-action"),$form.bind("submit",function(o){a.val()||(o.preventDefault(),t.show(),e("first-question")),g.is(":checked")||s.is(":checked")||(o.preventDefault(),m.show(),e("first-question"))});var r=[{name:"Stowford Manor Farm",url:"http://www.stowfordmanorfarm.co.uk",lat:"51.31811432866838",lon:"-2.273397445678711",summary:"Wedding venue"},{name:"Hartley Farm",url:"http://www.hartley-farm.co.uk",lat:"51.355033236947925",lon:"-2.2861862182617188",summary:"Farm shop with a good cafe."},{name:"Lock Inn Cafe",url:"http://www.thelockinn.co.uk",lat:"51.3415640958471",lon:"-2.252047061920166",summary:"Big servings of nice food. Giant fry-ups available."},{name:"The New Inn",url:"http://www.thenewinnwestwood.co.uk",lat:"51.330103833288085",lon:"-2.2684460878372192",summary:"Pub with food."},{name:"Hungerford Arms",url:"http://www.hungerfordarms.co.uk",lat:"51.31647313346644",lon:"-2.2886109352111816",summary:"Pub that should be better than it is. Fine for beer in the sun."},{name:"The Poplars",url:"http://www.poplarsinn.co.uk",lat:"51.30963782091155",lon:"-2.2576475143432617",summary:"Good pub, nice food."},{name:"Sainsburys",url:"http://www.sainsburys.co.uk/sol/storelocator/storelocator_detail_view.jsp?storeId=2143&bmForm=store_details",lat:"51.33727458308745",lon:"-2.2522830963134766",summary:"Should provide for all your cash, booze and snacking needs"}],l=[{name:"Stowford Manor Farm",url:"http://www.stowfordmanorfarm.co.uk",lat:"51.31811432866838",lon:"-2.273397445678711",summary:"Wedding venue"},{name:"Old Manor hotel",url:"http://www.oldmanorhotel.com",lat:"51.32691107277062",lon:"-2.2278213500976562",summary:"Nice posh hotel."},{name:"Home Farm Guest House",url:"http://www.homefarm-guesthouse.co.uk",lat:"51.315056528599236",lon:"-2.2590208053588867",summary:"Weird but convenient B&B."},{name:"The Granary",url:"http://www.thegranarybedandbreakfastbath.co.uk",lat:"51.29912048296244",lon:"-2.285757064819336",summary:"Fancy B&B."},{name:"Bath Lodge Castle",url:"http://www.bathlodgecastle.co.uk",lat:"51.30467458163684",lon:"-2.304854393005371",summary:"Posh Hotel."},{name:"The George Inn",url:"http://www.georgeinnnsp.co.uk/home",lat:"51.30078409992866",lon:"-2.324960231781006",summary:"Nice looking pub with rooms."}];if($("#eating-map-canvas").length>0){var i=new google.maps.LatLng(51.31811432866838,-2.273397445678711),p=[],w=[];infoWindowsOpen=[];var c,d={center:i,zoom:12,mapTypeId:google.maps.MapTypeId.ROADMAP},u=new google.maps.Map(document.getElementById("eating-map-canvas"),d),h=new google.maps.MarkerImage("/img/marker-eating.png",new google.maps.Size(52,74),new google.maps.Point(0,0),new google.maps.Point(26,74)),f=new google.maps.MarkerImage("/img/marker-shadow.png",new google.maps.Size(52,74),new google.maps.Point(0,0),new google.maps.Point(10,74)),k=new google.maps.MarkerImage("/img/marker-cash.png",new google.maps.Size(52,74),new google.maps.Point(0,0),new google.maps.Point(26,74)),v=new google.maps.MarkerImage("/img/marker-venue.png",new google.maps.Size(52,74),new google.maps.Point(0,0),new google.maps.Point(26,74));$(r).each(function(e,o){c="Sainsburys"===o.name?k:"Stowford Manor Farm"===o.name?v:h;var n=new google.maps.Marker({map:u,icon:c,shadow:f,position:new google.maps.LatLng(parseFloat(o.lat),parseFloat(o.lon))});p.push(n);var a=new google.maps.InfoWindow({content:"<div class='info-window'><p class='map-name'><a href='"+o.url+"'>"+o.name+"</a></p><p>"+o.summary+"</p></div>"});google.maps.event.addListener(n,"click",function(){$(infoWindowsOpen).each(function(){this.close()}),a.open(u,n),infoWindowsOpen.push(a)}),w.push(new google.maps.LatLng(parseFloat(o.lat),parseFloat(o.lon)))});for(var L=new google.maps.LatLngBounds,y=0;w.length>y;y++)L.extend(w[y]);u.setCenter(L.getCenter()),u.fitBounds(L)}if($("#sleeping-map-canvas").length>0){var i=new google.maps.LatLng(51.31811432866838,-2.273397445678711),p=[],w=[];infoWindowsOpen=[];var c,d={center:i,zoom:12,mapTypeId:google.maps.MapTypeId.ROADMAP},u=new google.maps.Map(document.getElementById("sleeping-map-canvas"),d),h=new google.maps.MarkerImage("/img/marker-accommodation.png",new google.maps.Size(52,74),new google.maps.Point(0,0),new google.maps.Point(26,74)),f=new google.maps.MarkerImage("/img/marker-shadow.png",new google.maps.Size(52,74),new google.maps.Point(0,0),new google.maps.Point(10,74)),v=new google.maps.MarkerImage("/img/marker-venue.png",new google.maps.Size(52,74),new google.maps.Point(0,0),new google.maps.Point(26,74));$(l).each(function(e,o){c="Stowford Manor Farm"===o.name?v:h;var n=new google.maps.Marker({map:u,icon:c,shadow:f,position:new google.maps.LatLng(parseFloat(o.lat),parseFloat(o.lon))});p.push(n);var a=new google.maps.InfoWindow({content:"<div class='info-window'><p class='map-name'><a href='"+o.url+"'>"+o.name+"</a></p><p>"+o.summary+"</p></div>"});google.maps.event.addListener(n,"click",function(){$(infoWindowsOpen).each(function(){this.close()}),a.open(u,n),infoWindowsOpen.push(a)}),w.push(new google.maps.LatLng(parseFloat(o.lat),parseFloat(o.lon)))});for(var L=new google.maps.LatLngBounds,y=0;w.length>y;y++)L.extend(w[y]);u.setCenter(L.getCenter()),u.fitBounds(L)}if($("#map-canvas").length>0){var i=new google.maps.LatLng(51.31811432866838,-2.273397445678711),d={center:i,zoom:12,mapTypeId:google.maps.MapTypeId.ROADMAP},u=new google.maps.Map(document.getElementById("map-canvas"),d),h=new google.maps.MarkerImage("/img/marker-venue.png",new google.maps.Size(52,74),new google.maps.Point(0,0),new google.maps.Point(26,74)),f=new google.maps.MarkerImage("/img/marker-shadow.png",new google.maps.Size(52,74),new google.maps.Point(0,0),new google.maps.Point(10,74)),M=new google.maps.Marker({map:u,icon:h,shadow:f,position:i}),I=new google.maps.InfoWindow({content:"<div class='info-window'><p class='map-name'><a href='http://www.stowfordmanorfarm.co.uk/'>Stowford Manor Farm</a></p></div>"});google.maps.event.addListener(M,"click",function(){I.open(u,M)})}if($("#honeymoon-map-canvas").length>0){var i=new google.maps.LatLng(51.31811432866838,-2.273397445678711),d={center:i,zoom:8,maptypecontrol:!1,mapTypeId:google.maps.MapTypeId.ROADMAP},u=new google.maps.Map(document.getElementById("honeymoon-map-canvas"),d),P=new google.maps.DirectionsService,h=new google.maps.MarkerImage("/img/temp_marker.png",new google.maps.Size(2,2),new google.maps.Point(0,0),new google.maps.Point(2,2)),f=new google.maps.MarkerImage("/img/marker-shadow.png",new google.maps.Size(52,74),new google.maps.Point(0,0),new google.maps.Point(10,74));n()}});